{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport React from 'react';\nimport Components from '../components/index';\nimport Layout from '../components/layout';\nimport StoryblokService from '../utils/storyblok-service';\n\nvar _default =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(_default, _React$Component);\n\n  function _default(props) {\n    var _this;\n\n    _classCallCheck(this, _default);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(_default).call(this, props));\n    _this.state = {\n      pageContent: props.page.data.story.content\n    };\n    return _this;\n  }\n\n  _createClass(_default, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      StoryblokService.initEditor(this);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var settings = this.props.settings;\n      var pageContent = this.state.pageContent;\n      return React.createElement(Layout, {\n        settings: settings.data.story\n      }, Components(pageContent));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(_ref) {\n        var query, _ref2, _ref3, page, settings;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                query = _ref.query;\n                StoryblokService.setQuery(query);\n                _context.next = 4;\n                return _Promise.all([StoryblokService.get('cdn/stories/home'), StoryblokService.get('cdn/stories/en/settings')]);\n\n              case 4:\n                _ref2 = _context.sent;\n                _ref3 = _slicedToArray(_ref2, 2);\n                page = _ref3[0];\n                settings = _ref3[1];\n                return _context.abrupt(\"return\", {\n                  page: page,\n                  settings: settings\n                });\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return _default;\n}(React.Component);\n\nexport { _default as default };","map":{"version":3,"sources":["/Users/lin/h1-websits-cms/pages/index.js"],"names":["React","Components","Layout","StoryblokService","props","state","pageContent","page","data","story","content","initEditor","settings","query","setQuery","all","get","Component"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,qBAAvB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,gBAAP,MAA6B,4BAA7B;;;;;;;AAGE,oBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,kFAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACXC,MAAAA,WAAW,EAAEF,KAAK,CAACG,IAAN,CAAWC,IAAX,CAAgBC,KAAhB,CAAsBC;AADxB,KAAb;AAFiB;AAKlB;;;;wCAgBmB;AAClBP,MAAAA,gBAAgB,CAACQ,UAAjB,CAA4B,IAA5B;AACD;;;6BAEQ;AAAA,UACCC,QADD,GACc,KAAKR,KADnB,CACCQ,QADD;AAAA,UAECN,WAFD,GAEiB,KAAKD,KAFtB,CAECC,WAFD;AAGP,aACE,oBAAC,MAAD;AAAQ,QAAA,QAAQ,EAAEM,QAAQ,CAACJ,IAAT,CAAcC;AAAhC,SACGR,UAAU,CAACK,WAAD,CADb,CADF;AAKD;;;;;;;;;;;;;AA1B8BO,gBAAAA,K,QAAAA,K;AAC7BV,gBAAAA,gBAAgB,CAACW,QAAjB,CAA0BD,KAA1B;;uBAE6B,SAAQE,GAAR,CAAY,CACvCZ,gBAAgB,CAACa,GAAjB,CAAqB,kBAArB,CADuC,EAEvCb,gBAAgB,CAACa,GAAjB,CAAqB,yBAArB,CAFuC,CAAZ,C;;;;;AAAxBT,gBAAAA,I;AAAMK,gBAAAA,Q;iDAKJ;AACLL,kBAAAA,IAAI,EAAJA,IADK;AAELK,kBAAAA,QAAQ,EAARA;AAFK,iB;;;;;;;;;;;;;;;;;;;EAhBkBZ,KAAK,CAACiB,S","sourcesContent":["import React from 'react'\nimport Components from '../components/index'\nimport Layout from '../components/layout'\nimport StoryblokService from '../utils/storyblok-service'\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      pageContent: props.page.data.story.content,\n    }\n  }\n\n  static async getInitialProps({ query }) {\n    StoryblokService.setQuery(query)\n\n    let [page, settings] = await Promise.all([\n      StoryblokService.get('cdn/stories/home'),\n      StoryblokService.get('cdn/stories/en/settings')\n    ])\n\n    return {\n      page,\n      settings\n    }\n  }\n\n  componentDidMount() {\n    StoryblokService.initEditor(this)\n  }\n\n  render() {\n    const { settings } = this.props\n    const { pageContent } = this.state\n    return (\n      <Layout settings={settings.data.story}>\n        {Components(pageContent)}\n      </Layout>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}